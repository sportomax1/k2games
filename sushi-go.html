<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sushi Go! Pro</title>
    <style>
        :root { --p-bg: #fff1f2; --p-text: #881337; --card-border: #fb7185; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--p-bg); color: var(--p-text); display: flex; flex-direction: column; align-items: center; padding: 20px; margin: 0; }
        .game-info { background: white; padding: 15px 30px; border-radius: 12px; margin-bottom: 20px; display: flex; gap: 30px; border: 2px solid var(--card-border); }
        .draft-area { display: flex; gap: 10px; margin: 20px; flex-wrap: wrap; justify-content: center; min-height: 150px; }
        .card { width: 90px; height: 130px; background: white; border-radius: 12px; border: 3px solid var(--card-border); display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; text-align: center; padding: 5px; font-weight: bold; transition: transform 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .card:hover { transform: translateY(-10px); }
        .played-area { width: 100%; max-width: 800px; display: flex; flex-direction: column; align-items: center; margin-top: 20px; }
        .plate { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; background: rgba(0,0,0,0.05); padding: 15px; border-radius: 15px; min-height: 80px; width: 100%; }
        .played-card { width: 60px; height: 90px; font-size: 0.8rem; border: 2px solid var(--card-border); }
        .ai-stats { display: flex; gap: 20px; margin-bottom: 20px; }
        .ai-box { background: white; padding: 10px; border-radius: 8px; border: 1px solid #fda4af; font-size: 0.9rem; }
        .back { text-decoration: none; color: #fb7185; margin-top: 30px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>üç£ Sushi Go! Master üç£</h1>
    <div class="ai-stats">
        <div class="ai-box">AI 1: <span id="ai1Score">0</span> pts | <span id="ai1Pudding">0</span> üçÆ</div>
        <div class="ai-box">AI 2: <span id="ai2Score">0</span> pts | <span id="ai2Pudding">0</span> üçÆ</div>
    </div>
    <div class="game-info">
        <div>Score: <span id="score">0</span></div>
        <div>Round: <span id="round">1</span>/3</div>
        <div>Pudding: <span id="pudding">0</span> üçÆ</div>
    </div>
    <h3>Draft a Card:</h3>
    <div class="draft-area" id="draft"></div>
    <div class="played-area">
        <h3>Your Plate:</h3>
        <div class="plate" id="plate"></div>
    </div>
    <a href="index.html" class="back">‚Üê Back to Hub</a>

    <script>
        const types = [
            { name: 'Maki', icon: 'üç±', color: '#ff6b6b' },
            { name: 'Sashimi', icon: 'üêü', color: '#74b9ff' },
            { name: 'Tempura', icon: 'üç§', color: '#fdcb6e' },
            { name: 'Dumpling', icon: 'ü•ü', color: '#a29bfe' },
            { name: 'Nigiri', icon: 'üç£', color: '#00b894' },
            { name: 'Wasabi', icon: 'üåø', color: '#fab1a0' },
            { name: 'Pudding', icon: 'üçÆ', color: '#fd79a8' }
        ];

        let player = { score: 0, plate: [], pudding: 0, hand: [] };
        let ai1 = { score: 0, plate: [], pudding: 0, hand: [] };
        let ai2 = { score: 0, plate: [], pudding: 0, hand: [] };
        let round = 1, turn = 0;

        function createHand(size) {
            return Array(size).fill().map(() => types[Math.floor(Math.random() * types.length)]);
        }

        function initRound() {
            player.hand = createHand(10);
            ai1.hand = createHand(10);
            ai2.hand = createHand(10);
            player.plate = [];
            ai1.plate = [];
            ai2.plate = [];
            turn = 0;
            render();
        }

        function render() {
            const draftEl = document.getElementById('draft');
            draftEl.innerHTML = '';
            player.hand.forEach((card, i) => {
                const div = document.createElement('div');
                div.className = 'card';
                div.style.borderColor = card.color;
                div.innerHTML = `<div style="font-size:2rem">${card.icon}</div><div>${card.name}</div>`;
                div.onclick = () => playTurn(i);
                draftEl.appendChild(div);
            });

            const plateEl = document.getElementById('plate');
            plateEl.innerHTML = player.plate.map(c => `<div class="card played-card" style="border-color:${c.color}">${c.icon}<br>${c.name}</div>`).join('');
            
            document.getElementById('score').textContent = player.score;
            document.getElementById('round').textContent = round;
            document.getElementById('pudding').textContent = player.pudding;
            document.getElementById('ai1Score').textContent = ai1.score;
            document.getElementById('ai2Score').textContent = ai2.score;
            document.getElementById('ai1Pudding').textContent = ai1.pudding;
            document.getElementById('ai2Pudding').textContent = ai2.pudding;
        }

        function playTurn(i) {
            // Player Move
            const pCard = player.hand.splice(i, 1)[0];
            player.plate.push(pCard);
            if (pCard.name === 'Pudding') player.pudding++;

            // AI Moves
            [ai1, ai2].forEach(ai => {
                const aiCard = ai.hand.splice(0, 1)[0];
                ai.plate.push(aiCard);
                if (aiCard.name === 'Pudding') ai.pudding++;
            });

            // Rotate Hands
            let temp = player.hand;
            player.hand = ai2.hand;
            ai2.hand = ai1.hand;
            ai1.hand = temp;

            turn++;
            if (turn >= 10) endRound();
            else render();
        }

        function calculateScore(plate) {
            let s = 0;
            const counts = {};
            plate.forEach(c => counts[c.name] = (counts[c.name] || 0) + 1);
            
            if (counts.Maki) s += Math.floor(counts.Maki / 3) * 6;
            if (counts.Sashimi) s += Math.floor(counts.Sashimi / 3) * 10;
            if (counts.Tempura) s += Math.floor(counts.Tempura / 2) * 5;
            if (counts.Dumpling) {
                const dPts = [0, 1, 3, 6, 10, 15];
                s += dPts[Math.min(counts.Dumpling, 5)];
            }
            if (counts.Nigiri) s += counts.Nigiri * 3;
            return s;
        }

        function endRound() {
            player.score += calculateScore(player.plate);
            ai1.score += calculateScore(ai1.plate);
            ai2.score += calculateScore(ai2.plate);
            
            round++;
            if (round > 3) {
                // Pudding Scoring
                const puddings = [player.pudding, ai1.pudding, ai2.pudding];
                const max = Math.max(...puddings);
                if (player.pudding === max) player.score += 6;
                alert(`Game Over! Final Scores:\nYou: ${player.score}\nAI 1: ${ai1.score}\nAI 2: ${ai2.score}`);
                location.reload();
            } else {
                alert(`Round ${round-1} Complete!`);
                initRound();
            }
        }

        initRound();
    </script>
</body>
</html>