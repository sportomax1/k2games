<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Everdell Farshore - K2 games</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #1e3c72;
            --secondary: #2a5298;
            --accent: #fbbf24;
            --bg: #f0f9ff;
            --card-bg: #ffffff;
            --text: #1e293b;
            --success: #22c55e;
            --sea: #0ea5e9;
            --sand: #fde68a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--bg);
            background-image: 
                radial-gradient(at 0% 0%, rgba(14, 165, 233, 0.1) 0, transparent 50%),
                radial-gradient(at 100% 100%, rgba(251, 191, 36, 0.1) 0, transparent 50%);
            color: var(--text);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            min-height: 100vh;
            padding-bottom: 50px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        h1 {
            font-size: 3.5rem;
            font-weight: 900;
            color: var(--primary);
            letter-spacing: -1px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--sea);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 3rem;
            background: rgba(255,255,255,0.5);
            padding: 1rem;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.05);
        }

        .btn {
            padding: 0.8rem 2rem;
            border-radius: 50px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--secondary); transform: translateY(-2px); box-shadow: 0 10px 20px rgba(30, 60, 114, 0.2); }
        .btn-accent { background: var(--accent); color: #000; }
        .btn-accent:hover { background: #f59e0b; transform: translateY(-2px); box-shadow: 0 10px 20px rgba(251, 191, 36, 0.2); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }

        /* Deck & Discard */
        .play-area {
            display: flex;
            justify-content: center;
            gap: 4rem;
            margin-bottom: 4rem;
            perspective: 1000px;
        }

        .pile-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .card-slot {
            width: 240px;
            height: 340px;
            background: rgba(255,255,255,0.3);
            border: 3px dashed rgba(30, 60, 114, 0.1);
            border-radius: 20px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-back {
            width: 230px;
            height: 330px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 18px;
            border: 6px solid #fff;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            color: rgba(255,255,255,0.2);
            position: absolute;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .card-back:hover { transform: translateY(-10px) rotate(-2deg); }

        /* Card Visuals */
        .card {
            width: 230px;
            height: 330px;
            background: white;
            border-radius: 18px;
            border: 2px solid #e2e8f0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .card-type-tag {
            font-size: 0.65rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 4px 12px;
            border-radius: 50px;
            margin-bottom: 10px;
            display: inline-block;
        }

        .type-prosperity { background: #fef3c7; color: #92400e; }
        .type-production { background: #dcfce7; color: #166534; }
        .type-destination { background: #fee2e2; color: #991b1b; }
        .type-governance { background: #e0f2fe; color: #075985; }
        .type-traveler { background: #f3e8ff; color: #6b21a8; }

        .card-title { font-size: 1.3rem; font-weight: 800; color: var(--primary); margin-bottom: 8px; }
        .card-cost { font-size: 0.8rem; color: #64748b; font-style: italic; margin-bottom: 12px; }
        .card-effect { font-size: 0.9rem; line-height: 1.4; color: #334155; flex: 1; display: flex; align-items: center; justify-content: center; }
        .card-vp { 
            font-size: 1.5rem; font-weight: 900; color: var(--accent); 
            background: var(--primary); width: 50px; height: 50px; 
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            margin: 10px auto 0 auto; border: 3px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .card-quantity {
            position: absolute; top: 10px; right: 10px;
            font-size: 0.7rem; font-weight: 900; background: #f1f5f9;
            padding: 2px 8px; border-radius: 4px; color: #475569;
        }

        /* Flipping animation */
        .flip-container { position: relative; width: 230px; height: 330px; transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .flip-container.flipped { transform: rotateY(180deg); }
        .flip-front, .flip-back { position: absolute; inset: 0; backface-visibility: hidden; }
        .flip-front { transform: rotateY(180deg); }

        /* Grid Mode */
        .section-header { margin: 3rem 0 1.5rem 0; display: flex; align-items: center; gap: 1rem; }
        .section-header h2 { font-size: 2rem; font-weight: 800; color: var(--primary); }
        .line { flex: 1; height: 2px; background: linear-gradient(to right, var(--primary), transparent); }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
            gap: 2rem;
        }

        .back-link {
            position: fixed; top: 20px; left: 20px; color: white; text-decoration: none;
            background: var(--primary); padding: 10px 20px; border-radius: 12px; z-index: 1000;
            font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: 0.2s;
        }
        .back-link:hover { transform: translateY(-2px); filter: brightness(1.1); }

        #count-badges { font-size: 0.9rem; font-weight: 700; color: var(--sea); }

        /* Animations */
        @keyframes drawAnim {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(280px, 0) rotateY(180deg); }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê HUB</a>

    <div class="container">
        <header>
            <p class="subtitle">Oceanic Exploration</p>
            <h1>EVERDELL FARSHORE</h1>
        </header>

        <div class="controls">
            <button class="btn btn-accent" id="shuffle-btn"><i class="fas fa-random"></i> Shuffle & Start</button>
            <button class="btn btn-primary" id="draw-btn" disabled><i class="fas fa-hand-pointer"></i> Draw Card</button>
            <button class="btn" id="reset-btn"><i class="fas fa-th"></i> View All Cards</button>
        </div>

        <div id="deck-view" class="play-area" style="display: none;">
            <div class="pile-container">
                <div class="card-slot" id="deck-stack"></div>
                <div id="deck-count" class="count-badge"></div>
            </div>
            <div class="pile-container">
                <div class="card-slot" id="discard-pile"></div>
                <div id="discard-count" class="count-badge"></div>
            </div>
        </div>

        <div id="grid-view">
            <div class="section-header">
                <h2>Constructions</h2>
                <div class="line"></div>
            </div>
            <div id="constructions-grid" class="card-grid"></div>

            <div class="section-header">
                <h2>Critters</h2>
                <div class="line"></div>
            </div>
            <div id="critters-grid" class="card-grid"></div>
        </div>
    </div>

    <script>
        const CARD_DATA = {
            constructions: [
                { name: "Gardens", quantity: 2, points: 4, type: "Prosperity", cost: "2 Driftwood, 3 Seaweed, 2 Seaglass", effect: "2 VP for each Unique Critter in your city.", icon: "üå∏" },
                { name: "Harbor", quantity: 2, points: 5, type: "Prosperity", cost: "3 Driftwood, 2 Seaweed, 3 Seaglass", effect: "3 VP for each Prosperity card in your city.", icon: "‚öì" },
                { name: "Manor", quantity: 2, points: 4, type: "Prosperity", cost: "2 Driftwood, 2 Seaweed, 3 Seaglass", effect: "2 VP for each Common Critter in your city.", icon: "üè†" },
                { name: "Windmill", quantity: 2, points: 2, type: "Prosperity", cost: "2 Driftwood, 2 Seaweed, 2 Seaglass", effect: "2 VP for each Production card in your city.", icon: "üåæ" },
                { name: "Sloop", quantity: 2, points: 1, type: "Production", cost: "2 Driftwood, 2 Seaweed", effect: "Move your Ship 2 spaces.", icon: "‚õµ" },
                { name: "Warehouse", quantity: 2, points: 2, type: "Production", cost: "2 Driftwood, 1 Seaweed, 1 Seaglass", effect: "When played, gain 2 Resources from this Warehouse.", icon: "üì¶" },
                { name: "Crow's Nest", quantity: 2, points: 2, type: "Destination", cost: "3 Driftwood, 1 Seaglass", effect: "When ACTIVATED move your Ship 3 spaces.", icon: "ü¶Ö" },
                { name: "Customs Office", quantity: 3, points: 3, type: "Governance", cost: "2 Driftwood, 1 Seaweed, 1 Seaglass", effect: "Give 1 card to opponent to gain 1 VP and draw 1 card.", icon: "üõÇ" },
                { name: "Lighthouse", quantity: 2, points: 1, type: "Governance", cost: "1 Driftwood, 3 Seaglass", effect: "Discard 1 card to move 1 additional space.", icon: "üèÆ" },
                { name: "Market", quantity: 3, points: 1, type: "Governance", cost: "3 ANY", effect: "Discard to pay 3 fewer Resources for a card.", icon: "üß∫" },
                { name: "Port", quantity: 3, points: 2, type: "Governance", cost: "1 Driftwood, 1 Seaweed, 2 Seaglass", effect: "Gain 1 Resource after you play a Critter.", icon: "üö¢" },
                { name: "Galley", quantity: 3, points: 3, type: "Traveler", cost: "3 Driftwood, 2 Seaweed", effect: "Move your Ship 3 spaces.", icon: "üö§" },
                { name: "Hideout", quantity: 2, points: 0, type: "Traveler", cost: "1 Driftwood, 1 Seaweed, 1 Seaglass", effect: "Discard up to 5 cards to gain 1 VP and draw 1 for each.", icon: "üõñ" },
                { name: "Shipwreck", quantity: 3, points: -1, type: "Traveler", cost: "0 Resources", effect: "Discard a Construction to gain 1 Treasure.", icon: "üèöÔ∏è" }
            ],
            critters: [
                { name: "Admiral", quantity: 2, points: 4, type: "Prosperity", cost: "5 Mushrooms", effect: "1 VP for each Treasure space reached or passed.", icon: "üéñÔ∏è" },
                { name: "Governor", quantity: 2, points: 4, type: "Prosperity", cost: "5 Mushrooms", effect: "2 VP for each Common Construction in city.", icon: "‚öñÔ∏è" },
                { name: "Guild Master", quantity: 2, points: 2, type: "Prosperity", cost: "4 Mushrooms", effect: "1 VP for each Governance, Destination, and Traveler card.", icon: "üé©" },
                { name: "Pilgrim", quantity: 2, points: 2, type: "Prosperity", cost: "5 Mushrooms", effect: "2 VP for each Map tile you have.", icon: "üö∂" },
                { name: "Sculptor", quantity: 2, points: 4, type: "Prosperity", cost: "5 Mushrooms", effect: "2 VP for each Unique Construction in city.", icon: "üóø" },
                { name: "Treasure Hunter", quantity: 2, points: 1, type: "Production", cost: "3 Mushrooms", effect: "Gain 1 Treasure.", icon: "üíé" },
                { name: "Cartographer", quantity: 2, points: 2, type: "Destination", cost: "2 Mushrooms", effect: "When ACTIVATED copy any Shoreline or Island.", icon: "üó∫Ô∏è" },
                { name: "Illuminator", quantity: 2, points: 2, type: "Destination", cost: "2 Mushrooms", effect: "When ACTIVATED copy any Destination ability.", icon: "üí°" },
                { name: "Cooper", quantity: 2, points: 2, type: "Destination", cost: "3 Mushrooms", effect: "When ACTIVATED gain 2 Treasures.", icon: "üõ¢Ô∏è" },
                { name: "Herbalist", quantity: 3, points: 1, type: "Governance", cost: "2 Mushrooms", effect: "Gain 1 Mushroom after playing a Construction.", icon: "üåø" },
                { name: "Lighthouse Keeper", quantity: 3, points: 1, type: "Governance", cost: "3 Mushrooms", effect: "Draw 1 card after you play a card.", icon: "ü¶â" },
                { name: "Navigator", quantity: 2, points: 2, type: "Governance", cost: "3 Mushrooms", effect: "Move with Windrose to draw 1 card.", icon: "üß≠" },
                { name: "Customs Officer", quantity: 3, points: 1, type: "Governance", cost: "3 Mushrooms", effect: "Replace 1 Resource in cost with any other.", icon: "üìã" },
                { name: "Castaway", quantity: 3, points: -1, type: "Traveler", cost: "0 Mushrooms", effect: "Discard a Critter to gain 1 Treasure.", icon: "üêö" },
                { name: "Stowaway", quantity: 2, points: 1, type: "Traveler", cost: "3 Mushrooms", effect: "Move 1 worker to a new location and activate.", icon: "üëû" },
                { name: "Pirate", quantity: 3, points: 0, type: "Traveler", cost: "3 Mushrooms", effect: "Gain 3 Treasures.", icon: "üè¥‚Äç‚ò†Ô∏è" },
                { name: "Diver", quantity: 3, points: 1, type: "Production", cost: "3 Mushrooms", effect: "Pay up to 3 Resources to gain 1 Treasure each.", icon: "ü§ø" },
                { name: "Merchant", quantity: 3, points: 2, type: "Production", cost: "2 Mushrooms", effect: "Pay any 1 Resource to gain any 2 Resources.", icon: "üõí" },
                { name: "Sail Maker", quantity: 3, points: 1, type: "Production", cost: "2 Mushrooms", effect: "Move your Ship 1 space.", icon: "üßµ" },
                { name: "Scavenger", quantity: 3, points: 2, type: "Production", cost: "2 Mushrooms", effect: "Gain any 1 Resource.", icon: "üîç" },
                { name: "Scribe", quantity: 3, points: 1, type: "Production", cost: "3 Mushrooms", effect: "Discard up to 3 to gain 1 VP and draw 1 each.", icon: "‚úíÔ∏è" },
                { name: "Sea Chip", quantity: 3, points: 1, type: "Production", cost: "2 Mushrooms", effect: "Activate 1 Production card in city.", icon: "ü™ô" },
                { name: "Steward", quantity: 3, points: 1, type: "Destination", cost: "2 Mushrooms", effect: "Activate 2 different Production cards.", icon: "üëî" },
                { name: "Postal Pigeon", quantity: 3, points: 0, type: "Traveler", cost: "2 Mushrooms", effect: "Draw 2, play 1 for free (not Prosperity).", icon: "üê¶" }
            ]
        };

        class EverdellApp {
            constructor() {
                this.deck = [];
                this.discard = [];
                this.mode = 'grid'; // 'grid' or 'deck'
                this.animating = false;

                this.init();
            }

            init() {
                this.renderGrid();
                this.setupEvents();
            }

            setupEvents() {
                document.getElementById('shuffle-btn').onclick = () => this.startDeckMode();
                document.getElementById('draw-btn').onclick = () => this.drawCard();
                document.getElementById('reset-btn').onclick = () => this.showGridMode();
            }

            renderGrid() {
                const cGrid = document.getElementById('constructions-grid');
                const crGrid = document.getElementById('critters-grid');
                
                cGrid.innerHTML = CARD_DATA.constructions.map(c => this.getCardHTML(c)).join('');
                crGrid.innerHTML = CARD_DATA.critters.map(c => this.getCardHTML(c)).join('');
            }

            getCardHTML(card) {
                return `
                    <div class="card">
                        <div class="card-quantity">${card.quantity}x</div>
                        <div class="card-type-tag type-${card.type.toLowerCase()}">${card.type}</div>
                        <div style="font-size: 2.5rem; margin-bottom: 5px;">${card.icon}</div>
                        <div class="card-title">${card.name}</div>
                        <div class="card-cost">${card.cost}</div>
                        <div class="card-effect">${card.effect}</div>
                        <div class="card-vp">${card.points}</div>
                    </div>
                `;
            }

            startDeckMode() {
                if(this.animating) return;
                
                // Flatten deck
                this.deck = [];
                [...CARD_DATA.constructions, ...CARD_DATA.critters].forEach(c => {
                    for(let i=0; i<c.quantity; i++) this.deck.push({...c});
                });

                // Shuffle
                for (let i = this.deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
                }

                this.discard = [];
                this.mode = 'deck';
                
                document.getElementById('grid-view').style.display = 'none';
                document.getElementById('deck-view').style.display = 'flex';
                document.getElementById('draw-btn').disabled = false;

                this.updateDeckStack();
                this.updateDiscardPile();
            }

            showGridMode() {
                this.mode = 'grid';
                document.getElementById('grid-view').style.display = 'block';
                document.getElementById('deck-view').style.display = 'none';
                document.getElementById('draw-btn').disabled = true;
            }

            updateDeckStack() {
                const stack = document.getElementById('deck-stack');
                stack.innerHTML = this.deck.length > 0 ? '<div class="card-back">üåä</div>' : '';
                document.getElementById('deck-count').textContent = `${this.deck.length} Left`;
            }

            updateDiscardPile(newCard = null) {
                const pile = document.getElementById('discard-pile');
                if(!newCard) {
                    pile.innerHTML = '';
                    document.getElementById('discard-count').textContent = 'Discard Empty';
                    return;
                }

                pile.innerHTML = `
                    <div class="flip-container" id="current-flip">
                        <div class="flip-back card-back">üåä</div>
                        <div class="flip-front">${this.getCardHTML(newCard)}</div>
                    </div>
                `;

                // Trigger flip
                setTimeout(() => {
                    document.getElementById('current-flip').classList.add('flipped');
                }, 50);

                document.getElementById('discard-count').textContent = `Discard: ${this.discard.length}`;
            }

            drawCard() {
                if(this.deck.length === 0 || this.animating) return;
                
                const card = this.deck.pop();
                this.discard.push(card);
                
                this.updateDeckStack();
                this.updateDiscardPile(card);

                if(this.deck.length === 0) document.getElementById('draw-btn').disabled = true;
            }
        }

        window.onload = () => { window.app = new EverdellApp(); };
    </script>
</body>
</html>
