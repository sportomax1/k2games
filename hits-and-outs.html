<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hits and Outs</title>
    <style>
        body { font-family: sans-serif; background: linear-gradient(135deg, #2d5016 0%, #4a7c59 100%); color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; min-height: 100vh; margin: 0; }
        .score-board { background: rgba(0,0,0,0.3); padding: 15px 30px; border-radius: 12px; margin-bottom: 20px; text-align: center; }
        .diamond { position: relative; width: 300px; height: 300px; margin: 20px auto; transform: rotate(45deg); border: 4px solid white; background: rgba(255,255,255,0.1); }
        .base { position: absolute; width: 25px; height: 25px; background: white; border-radius: 4px; transform: translate(-50%, -50%); }
        .home { top: 100%; left: 100%; }
        .first { top: 0%; left: 100%; }
        .second { top: 0%; left: 0%; }
        .third { top: 100%; left: 0%; }
        .runner { background: #ef4444 !important; border-radius: 50% !important; border: 2px solid white; }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; width: 100%; max-width: 500px; }
        .btn { padding: 15px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; background: #fb7185; color: white; }
        .back { margin-top: 20px; text-decoration: none; color: #a7f3d0; }
    </style>
</head>
<body>
    <h1>⚾ Hits and Outs ⚾</h1>
    <div class="score-board" id="score">
        Top 1st | Outs: 0 | P1: 0 - P2: 0
    </div>
    <div class="diamond">
        <div class="base home"></div>
        <div class="base first" id="b1"></div>
        <div class="base second" id="b2"></div>
        <div class="base third" id="b3"></div>
    </div>
    <div id="status">P1 (Pitcher) select location</div>
    <div class="controls" id="controls"></div>
    <a href="index.html" class="back">← Back to Hub</a>

    <script>
        let state = { inning: 1, top: true, outs: 0, p1Runs: 0, p2Runs: 0, runners: [false, false, false], pLoc: null };
        const locs = ['High Left', 'High Right', 'Low Left', 'Low Right'];

        function render() {
            document.getElementById('score').textContent = `${state.top?'Top':'Bot'} ${state.inning} | Outs: ${state.outs} | P1: ${state.p1Runs} - P2: ${state.p2Runs}`;
            document.getElementById('b1').className = 'base first' + (state.runners[0] ? ' runner' : '');
            document.getElementById('b2').className = 'base second' + (state.runners[1] ? ' runner' : '');
            document.getElementById('b3').className = 'base third' + (state.runners[2] ? ' runner' : '');
            
            const ctrl = document.getElementById('controls');
            ctrl.innerHTML = '';
            const isPitcher = (state.top && true) || (!state.top && false); // Simplified: P1 always top pitcher
            const label = state.pLoc === null ? "Pitcher: Choose" : "Batter: Guess";
            document.getElementById('status').textContent = label;

            locs.forEach(l => {
                const b = document.createElement('button');
                b.className = 'btn';
                b.textContent = l;
                b.onclick = () => handleChoice(l);
                ctrl.appendChild(b);
            });
        }

        function handleChoice(l) {
            if (state.pLoc === null) {
                state.pLoc = l;
                render();
            } else {
                if (state.pLoc === l) {
                    alert("HIT!");
                    advance(1);
                } else {
                    alert("OUT!");
                    state.outs++;
                }
                state.pLoc = null;
                if (state.outs >= 3) {
                    state.outs = 0; state.runners = [false, false, false];
                    if (!state.top) state.inning++;
                    state.top = !state.top;
                }
                render();
            }
        }

        function advance(num) {
            for (let i = 2; i >= 0; i--) {
                if (state.runners[i]) {
                    if (i + num >= 3) { if (state.top) state.p2Runs++; else state.p1Runs++; }
                    else state.runners[i + num] = true;
                    state.runners[i] = false;
                }
            }
            state.runners[num - 1] = true;
        }

        render();
    </script>
</body>
</html>