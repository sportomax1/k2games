<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simon Says</title>
    <style>
        body { font-family: sans-serif; background: #1e293b; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 300px; height: 300px; margin-top: 20px; }
        .pad { border-radius: 20px; cursor: pointer; transition: 0.1s; opacity: 0.6; border: 4px solid rgba(0,0,0,0.2); }
        .pad:active, .pad.active { opacity: 1; transform: scale(0.95); box-shadow: 0 0 30px currentColor; }
        .red { background: #ef4444; color: #ef4444; }
        .blue { background: #3b82f6; color: #3b82f6; }
        .green { background: #22c55e; color: #22c55e; }
        .yellow { background: #eab308; color: #eab308; }
        .center-ui { position: absolute; background: #1e293b; width: 100px; height: 100px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; border: 8px solid #334155; }
        .btn { margin-top: 30px; padding: 12px 30px; background: #2563eb; border: none; color: white; border-radius: 8px; cursor: pointer; font-size: 1.2rem; font-weight: bold; }
        .back { margin-top: 20px; text-decoration: none; color: #94a3b8; }
    </style>
</head>
<body>
    <h1>Simon Says</h1>
    <div id="status">Press Start to Begin</div>
    <div style="position: relative; display: flex; align-items: center; justify-content: center;">
        <div class="grid">
            <div class="pad green" id="0" onclick="handleInput(0)"></div>
            <div class="pad red" id="1" onclick="handleInput(1)"></div>
            <div class="pad yellow" id="2" onclick="handleInput(2)"></div>
            <div class="pad blue" id="3" onclick="handleInput(3)"></div>
        </div>
        <div class="center-ui" id="score">0</div>
    </div>
    <button class="btn" id="startBtn" onclick="startGame()">START</button>
    <a href="index.html" class="back">‚Üê HUB</a>

    <script>
        let sequence = [];
        let playerSequence = [];
        let isPlaying = false;
        let canInput = false;

        async function startGame() {
            sequence = [];
            nextRound();
            document.getElementById('startBtn').style.display = 'none';
        }

        function nextRound() {
            playerSequence = [];
            canInput = false;
            sequence.push(Math.floor(Math.random() * 4));
            document.getElementById('score').textContent = sequence.length;
            playSequence();
        }

        async function playSequence() {
            document.getElementById('status').textContent = "Simon's Turn...";
            for (let id of sequence) {
                await flashPad(id);
                await new Promise(r => setTimeout(res, 200));
            }
            canInput = true;
            document.getElementById('status').textContent = "Your Turn!";
        }

        function flashPad(id) {
            return new Promise(resolve => {
                const el = document.getElementById(id);
                el.classList.add('active');
                // Optional: add beep sounds here if desired
                setTimeout(() => {
                    el.classList.remove('active');
                    setTimeout(resolve, 250);
                }, 500);
            });
        }

        function handleInput(id) {
            if (!canInput) return;
            flashPad(id);
            playerSequence.push(id);
            
            const index = playerSequence.length - 1;
            if (playerSequence[index] !== sequence[index]) {
                gameOver();
                return;
            }

            if (playerSequence.length === sequence.length) {
                canInput = false;
                setTimeout(nextRound, 1000);
            }
        }

        function gameOver() {
            alert("Game Over! Final Score: " + (sequence.length - 1));
            document.getElementById('startBtn').style.display = 'block';
            document.getElementById('status').textContent = "Press Start to Begin";
            document.getElementById('score').textContent = "0";
            sequence = [];
        }
    </script>
</body>
</html>